(function(t){function e(e){for(var a,s,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],a=!0,r=1;r<o.length;r++){var c=o[r];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=a,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(o,a,function(e){return t[e]}.bind(null,a));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"29b7":function(t,e,o){"use strict";o("67c4")},"2e2d":function(t,e,o){"use strict";o("32c8")},"30c9":function(t,e,o){"use strict";o("ac45")},"32c8":function(t,e,o){},4678:function(t,e,o){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return o(e)}function i(t){if(!o.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="4678"},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",{attrs:{id:"inspire"}},[o("v-app-bar",{attrs:{app:"",color:"primary"}},[o("v-spacer"),o("h1",{staticStyle:{"font-family":"Beth Ellen"}},[t._v("Darpan")]),o("v-spacer"),o("optionMenu")],1),o("v-main",{attrs:{app:""}},[o("router-view")],1),o("v-bottom-navigation",{attrs:{color:"teal",grow:!0,app:""}},t._l(t.items,(function(e){return o("v-btn",{key:e.id,attrs:{large:"",icon:"",color:"primary"},on:{click:function(o){return t.$router.push(e.path)}}},[o("span",[t._v(t._s(e.title))]),o("v-icon",[t._v(t._s(e.icon))])],1)})),1)],1)},i=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-menu",{attrs:{left:"",bottom:"","offset-y":"",transition:"scroll-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-dots-vertical")])],1)]}}])},[o("v-list",t._l(t.options,(function(e){return o("v-list-item",{key:e.id,attrs:{dense:""},on:{click:function(o){return t.$router.push(e.path)}}},[o("v-list-item-icon",[o("v-icon",[t._v(t._s(e.icon))])],1),o("v-list-item-title",[t._v(t._s(e.title))])],1)})),1)],1)},r=[],c={name:"OptionMenu",data:function(){return{options:[{id:1,title:"Import",icon:"mdi-file-import-outline",path:"/Import"},{id:2,title:"Re-Index",icon:"mdi-reload"},{id:3,title:"Settings",icon:"mdi-application-cog"},{id:4,title:"Bin",icon:"mdi-delete-outline",path:"/Bin"}]}}},l=c,d=o("2877"),u=o("6544"),h=o.n(u),m=o("8336"),f=o("132d"),p=o("8860"),b=o("da13"),v=o("34c3"),g=o("5d23"),x=o("e449"),y=Object(d["a"])(l,s,r,!1,null,null,null),_=y.exports;h()(y,{VBtn:m["a"],VIcon:f["a"],VList:p["a"],VListItem:b["a"],VListItemIcon:v["a"],VListItemTitle:g["c"],VMenu:x["a"]});var k={name:"App",components:{optionMenu:_},beforeCreate:function(){this.$vuetify.theme.dark=!1},data:function(){return{items:[{id:1,title:"Photos",icon:"mdi-image",path:"/Photos"},{id:2,title:"Albums",icon:"mdi-image-album",path:"/Albums"},{id:3,title:"People",icon:"mdi-account-box",path:"/People"}]}}},j=k,w=o("7496"),V=o("40dc"),I=o("b81c"),D=o("f6c4"),S=o("2fa4"),C=Object(d["a"])(j,n,i,!1,null,null,null),T=C.exports;h()(C,{VApp:w["a"],VAppBar:V["a"],VBottomNavigation:I["a"],VBtn:m["a"],VIcon:f["a"],VMain:D["a"],VSpacer:S["a"]});var A=o("8c4f"),P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[0!=t.photosSelected.length?o("v-toolbar",{staticStyle:{position:"fixed",right:"20px","z-index":"2","border-radius":"25px"},attrs:{dense:""}},[o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.onReindex}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-reload")])],1)]}}],null,!1,3747237086)},[o("span",[t._v("Re-index")])]),o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.onDeleteTemporary}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-delete-outline")])],1)]}}],null,!1,1566887120)},[o("span",[t._v("Delete")])]),o("add-to-album",{attrs:{selectedPhotoGuids:t.photosSelected}}),o("masslocation-edit",{attrs:{selectedPhotoGuids:t.photosSelected}}),o("mass-date-edit",{attrs:{selectedPhotoGuids:t.photosSelected}})],1):t._e(),t._l(t.sections,(function(e,a){return o("v-row",{key:a,staticClass:"mb-4"},[o("v-sheet",{directives:[{name:"intersect",rawName:"v-intersect",value:{handler:t.fetchFiles},expression:"{\n        handler: fetchFiles,\n      }"}],attrs:{width:"100%",height:e.height,"data-id":a}},[e.visible?o("photo-section",{attrs:{files:e.files},on:{photoClicked:function(e){t.lightBoxPhotoIndex.sectionIndex=a,t.lightBoxPhotoIndex.photoIndex=e,t.lightBoxVisible=!0},heightCalculated:function(t){return e.height=t},selectionChanged:t.selectionChanged},scopedSlots:t._u([{key:"header",fn:function(){return[o("h3",{staticClass:"title"},[t._v(" "+t._s(t.parseDate(e.takenMonth)+" ("+e.files.length+")")+" ")])]},proxy:!0}],null,!0)}):t._e()],1)],1)})),t.overlay?o("v-overlay",[o("v-progress-linear",{attrs:{indeterminate:"",color:"cyan"}})],1):t._e(),o("v-expand-transition",[t.lightBoxVisible?o("lightbox",{attrs:{photo:t.sections[t.lightBoxPhotoIndex.sectionIndex].files[t.lightBoxPhotoIndex.photoIndex]},on:{close:function(e){t.lightBoxVisible=!1},swipeLeft:t.onSwipeLeft,swipeRight:t.onSwipeRight}}):t._e()],1)],2)},B=[],$=o("1da1"),O=o("2909"),L=o("b85c"),R=(o("96cf"),o("a9e3"),o("4de4"),o("d81d"),o("99af"),o("d3b7"),o("25f0"),o("3ca3"),o("ddb0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-col",{ref:"section-tot"},[o("v-row",{attrs:{justify:"start"}},[o("v-checkbox",{staticClass:"ma-0",on:{change:t.onSelectAllCheckboxChange},model:{value:t.selectAllCheckbox,callback:function(e){t.selectAllCheckbox=e},expression:"selectAllCheckbox"}}),t._t("header")],2),o("v-divider",{staticClass:"mb-3"}),o("v-row",{ref:"section-row",staticClass:"ma-0",attrs:{dense:"",justify:"start"}},t._l(t.photos,(function(e,a){return o("v-col",{key:e.hash,staticClass:"ma-0 pa-0",attrs:{cols:"auto"}},[o("v-container",{style:{position:"relative",padding:t.padding+"px",margin:"0px"}},[o("v-checkbox",{staticClass:"checkBox-Photo",attrs:{light:""},on:{change:t.onSelectionChange},model:{value:e.selected,callback:function(o){t.$set(e,"selected",o)},expression:"photo.selected"}}),e.mimeType.startsWith("image")?o("v-img",{style:{opacity:e.selected?.5:1},attrs:{contain:"",src:"/thumb/"+e.UIpaths_srcSD,width:t.photoDims[a].width,height:t.photoDims[a].height},on:{click:function(e){return t.$emit("photoClicked",a)}}}):e.mimeType.startsWith("video")?o("video",{style:{opacity:e.selected?.5:1},attrs:{width:t.photoDims[a].width,height:t.photoDims[a].height,autoplay:"",loop:""},on:{click:function(e){return t.$emit("photoClicked",a)}}},[o("source",{attrs:{src:"/thumb/"+e.UIpaths_srcSD,type:"video/mp4"}})]):t._e()],1)],1)})),1)],1)}),M=[],z=o("8df8"),E={name:"PhotoSection",data:function(){return{photos:[],photoDims:[],selectAllCheckbox:!1,padding:4}},props:{files:{type:Array}},created:function(){window.addEventListener("resize",this.onResize)},destroyed:function(){window.removeEventListener("resize",this.onResize)},watch:{files:function(){this.photoDims=this.addSizeInfo(this.files),this.photos=this.files}},mounted:function(){this.photoDims=this.addSizeInfo(this.files),this.photos=this.files},updated:function(){this.$emit("heightCalculated",this.$refs["section-tot"].clientHeight)},methods:{onSelectionChange:function(){this.photos.filter((function(t){return t.selected})).length===this.photos.length?this.selectAllCheckbox=!0:this.selectAllCheckbox=!1,this.$emit("selectionChanged")},onSelectAllCheckboxChange:function(t){var e,o=Object(L["a"])(this.photos);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.selected=t}}catch(n){o.e(n)}finally{o.f()}this.$emit("selectionChanged")},addSizeInfo:function(t){for(var e=[],o=this.$refs["section-row"].clientWidth,a=z()?.3*o:.2*o,n=.2,i=this.padding,s=a-a*n,r=t.map((function(t){return t.dimensions_width_orient/t.dimensions_height_orient*a})),c=0,l=0,d=[],u=0;u<r.length;u++)c+=r[u],l+=2*i,c+l>o?(o-l)/(c/a)>=s?(d.push({breakAt:u,height:(o-l)/(c/a)}),c=0,l=0):(d.push({breakAt:u-1,height:(o-(l-2*i))/((c-r[u])/a)}),c=r[u],l=2*i):c+l==o?(d.push({breakAt:u,height:a}),c=0,l=0):u==r.length-1&&d.push({breakAt:u,height:a});for(var h=0;h<d.length;h++)for(var m=d[h],f=0==h?0:d[h-1].breakAt+1;f<=m.breakAt;f++)e.push({height:m.height,width:r[f]/a*m.height});return e},onResize:function(){this.photoDims=this.addSizeInfo(this.photos)}}},F=E,q=(o("921e"),o("ac7c")),N=o("62ad"),Y=o("a523"),U=o("ce7e"),G=o("adda"),H=o("0fd9"),W=Object(d["a"])(F,R,M,!1,null,"09b3688d",null),J=W.exports;h()(W,{VCheckbox:q["a"],VCol:N["a"],VContainer:Y["a"],VDivider:U["a"],VImg:G["a"],VRow:H["a"]});var Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{width:t.isMobile?"100%":"30%","hide-overlay":"",fullscreen:t.isMobile},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"primary",icon:""}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-calendar-range")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dense:""},scopedSlots:t._u([{key:"extension",fn:function(){return[o("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("v-tab",[t._v("Fixed Date")]),o("v-tab",[t._v("+/- Date Series")])],1)]},proxy:!0}])},[o("v-spacer"),o("v-toolbar-title",[t._v("Update Date/Time")]),o("v-spacer"),o("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v("mdi-close")])],1)],1),o("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("v-tab-item",[o("v-container",{attrs:{fluid:""}},[o("date-time-picker",{attrs:{disabled:!1,dateTime:t.constDateTime},on:{input:function(e){return t.constDateTime=e}}}),o("v-btn",{attrs:{width:"100%",color:"primary"},on:{click:t.onConstDataUpdate}},[o("v-icon",[t._v("mdi-check")]),t._v(" Execute ")],1)],1)],1),o("v-tab-item",[o("v-container",[o("v-btn-toggle",{attrs:{mandatory:"",dense:""},model:{value:t.toggleAddSub,callback:function(e){t.toggleAddSub=e},expression:"toggleAddSub"}},[o("v-btn",[o("v-icon",[t._v("mdi-plus")])],1),o("v-btn",[o("v-icon",[t._v("mdi-minus")])],1)],1),o("v-row",{staticClass:"mt-3"},[o("v-col",[o("v-select",{attrs:{"full-width":!1,items:t.dayList,label:"Days"},model:{value:t.days,callback:function(e){t.days=e},expression:"days"}})],1),o("v-col",[o("v-select",{attrs:{"full-width":!1,items:t.hourList,label:"Hours"},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}})],1),o("v-col",[o("v-select",{attrs:{"full-width":!1,items:t.minuteList,label:"Minutes"},model:{value:t.minutes,callback:function(e){t.minutes=e},expression:"minutes"}})],1),o("v-col",[o("v-select",{attrs:{"full-width":!1,items:t.secList,label:"Seconds"},model:{value:t.secs,callback:function(e){t.secs=e},expression:"secs"}})],1)],1),o("v-btn",{attrs:{color:"primary",width:"100%"},on:{click:t.onDataSeriesChange}},[o("v-icon",[t._v("mdi-check")]),t._v(" Execute ")],1)],1)],1)],1)],1)],1)},K=[],X=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-text-field",t._g(t._b({attrs:{value:t.dateTimeText,label:"Taken on","prepend-icon":"mdi-calendar",disabled:t.disabled}},"v-text-field",n,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[o("v-tabs",[o("v-tab",[t._v("Date")]),o("v-tab",[t._v("Time")]),o("v-tab-item",[o("v-date-picker",{on:{input:t.onInput},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),o("v-tab-item",[o("v-time-picker",{attrs:{"use-seconds":"","ampm-in-title":""},on:{input:t.onInput},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)],1)},Z=[],tt=o("c1df"),et={name:"DateTimePicker",data:function(){return{menu:!1,date:tt(this.dateTime).format("YYYY-MM-DD"),time:tt(this.dateTime).format("HH:mm:ss")}},props:{dateTime:{type:String},disabled:{type:Boolean}},watch:{dateTime:function(t){this.date=tt(t).format("YYYY-MM-DD"),this.time=tt(t).format("HH:mm:ss")}},computed:{dateTimeText:function(){return tt(this.date+"T"+this.time).format("dddd, MMMM Do, YYYY, h:mm:ss a")}},methods:{onInput:function(){this.$emit("input",tt(this.date+"T"+this.time).format())}}},ot=et,at=o("2e4b"),nt=o("71a3"),it=o("c671"),st=o("fe57"),rt=o("8654"),ct=o("c964"),lt=Object(d["a"])(ot,X,Z,!1,null,null,null),dt=lt.exports;h()(lt,{VDatePicker:at["a"],VMenu:x["a"],VTab:nt["a"],VTabItem:it["a"],VTabs:st["a"],VTextField:rt["a"],VTimePicker:ct["a"]});var ut=o("bc3a"),ht=o("c1df"),mt=o("8df8"),ft={name:"MassDateEdit",data:function(){return{dialog:!1,tab:"",isMobile:mt(),constDateTime:ht().utc().format(),toggleAddSub:"",days:0,hours:0,minutes:0,secs:0}},components:{dateTimePicker:dt},props:{selectedPhotoGuids:{type:Array}},computed:{dayList:function(){return Object(O["a"])(Array(32).keys())},hourList:function(){return Object(O["a"])(Array(25).keys())},minuteList:function(){return Object(O["a"])(Array(61).keys())},secList:function(){return Object(O["a"])(Array(61).keys())}},methods:{onConstDataUpdate:function(){var t,e=this,o=[],a=Object(L["a"])(this.selectedPhotoGuids);try{for(a.s();!(t=a.n()).done;){var n=t.value;o.push(ut.patch("/darpan/Files/".concat(n),{takenDateTime:this.constDateTime}))}}catch(i){a.e(i)}finally{a.f()}Promise.all(o).then((function(t){var o,a=[],n=Object(L["a"])(t);try{for(n.s();!(o=n.n()).done;){var s=o.value;a.push(s.data.hash)}}catch(i){n.e(i)}finally{n.f()}e.$toasted.success("".concat(a.length," photos updated"))})).catch((function(t){console.log(t),e.$toasted.error("Error Occured")}))},onDataSeriesChange:function(){var t,e=this,o=[],a=Object(L["a"])(this.selectedPhotoGuids);try{for(a.s();!(t=a.n()).done;){var n=t.value;o.push(ut.get("/darpan/Files/".concat(n,"?$select=takenDateTime")))}}catch(i){a.e(i)}finally{a.f()}Promise.all(o).then((function(t){var o,a=[],n=Object(L["a"])(t);try{for(n.s();!(o=n.n()).done;){var s=o.value,r=ht(s.data.takenDateTime);r.isValid()&&(0==e.toggleAddSub?r.add(e.days,"d").add(e.hours,"h").add(e.minutes,"m").add(e.secs,"s"):1==e.toggleAddSub&&r.subtract(e.days,"d").subtract(e.hours,"h").subtract(e.minutes,"m").subtract(e.secs,"s"),r.isValid()&&a.push(ut.patch("/darpan/Files/".concat(s.data.hash),{takenDateTime:r.format()})))}}catch(i){n.e(i)}finally{n.f()}return Promise.all(a)})).then((function(t){var o,a=[],n=Object(L["a"])(t);try{for(n.s();!(o=n.n()).done;){var s=o.value;a.push(s.data.hash)}}catch(i){n.e(i)}finally{n.f()}e.$toasted.success("".concat(a.length," photos updated"))})).catch((function(t){console.log(t),e.$toasted.error("Error Occured")}))}}},pt=ft,bt=o("a609"),vt=o("b0af"),gt=o("169a"),xt=o("b974"),yt=o("aac8"),_t=o("71d9"),kt=o("2a7f"),jt=Object(d["a"])(pt,Q,K,!1,null,null,null),wt=jt.exports;h()(jt,{VBtn:m["a"],VBtnToggle:bt["a"],VCard:vt["a"],VCol:N["a"],VContainer:Y["a"],VDialog:gt["a"],VIcon:f["a"],VRow:H["a"],VSelect:xt["a"],VSpacer:S["a"],VTab:nt["a"],VTabItem:it["a"],VTabs:st["a"],VTabsItems:yt["a"],VToolbar:_t["a"],VToolbarTitle:kt["a"]});var Vt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{width:t.isMobile?"100%":"30%","hide-overlay":"",fullscreen:t.isMobile,scrollable:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"primary",icon:""}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-map-marker-outline")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dense:""}},[o("v-text-field",{attrs:{"hide-details":"","prepend-icon":"mdi-crosshairs-gps","single-line":""},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),o("v-btn",{attrs:{icon:"",color:"primary"},on:{click:t.onQuery}},[o("v-icon",[t._v("mdi-magnify")])],1),o("v-spacer"),o("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v("mdi-close")])],1)],1),o("v-container",[o("v-list",[o("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedLocation,callback:function(e){t.selectedLocation=e},expression:"selectedLocation"}},t._l(t.queryResult,(function(e,a){return o("v-list-item",{key:a},[o("v-list-item-content",[o("v-list-item-title",[t._v(" "+t._s(e.name))]),o("v-list-item-subtitle",[t._v(t._s(e.address))])],1)],1)})),1)],1)],1),o("v-card-actions",[o("v-btn",{attrs:{width:"100%",color:"primary"},on:{click:t.onLocationSelected}},[t._v(" Select ")])],1)],1)],1)},It=[],Dt=o("bc3a"),St=o("8df8"),Ct={name:"MassLocationEdit",data:function(){return{dialog:!1,isMobile:St(),queryResult:[],query:"",selectedLocation:""}},props:{selectedPhotoGuids:{type:Array}},methods:{onQuery:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){Dt.get("/darpan/SearchPlaces(query='".concat(t.query,"',at='").concat(e.coords.latitude,",").concat(e.coords.longitude,"')")).then((function(e){t.queryResult=e.data.value})).catch((function(e){console.log(e),t.$toasted("Error occured")}))}))},onLocationSelected:function(){var t=this;if(""!==this.selectedLocation){var e,o=this.queryResult[this.selectedLocation],a=[],n=Object(L["a"])(this.selectedPhotoGuids);try{for(n.s();!(e=n.n()).done;){var i=e.value;a.push(Dt.patch("/darpan/Files/".concat(i),{gps_latitudeRef:o.latRef,gps_latitude:o.lat.toString(),gps_longitudeRef:o.longRef,gps_longitude:o.lon.toString()},{headers:{"content-type":"application/json;IEEE754Compatible=true"}}))}}catch(s){n.e(s)}finally{n.f()}0!=a.length&&Promise.all(a).then((function(e){var o,a=[],n=Object(L["a"])(e);try{for(n.s();!(o=n.n()).done;){var i=o.value;a.push(i.data.hash)}}catch(s){n.e(s)}finally{n.f()}t.$toasted.success("".concat(a.length," photos updated")),t.dialog=!1})).catch((function(e){console.log(e),t.$toasted.error("Error Occured")}))}}}},Tt=Ct,At=(o("c86f"),o("99d9")),Pt=o("1baa"),Bt=Object(d["a"])(Tt,Vt,It,!1,null,"6f1de2ac",null),$t=Bt.exports;h()(Bt,{VBtn:m["a"],VCard:vt["a"],VCardActions:At["a"],VContainer:Y["a"],VDialog:gt["a"],VIcon:f["a"],VList:p["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemGroup:Pt["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VSpacer:S["a"],VTextField:rt["a"],VToolbar:_t["a"]});var Ot=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{width:t.isMobile?"100%":"30%","hide-overlay":"",fullscreen:t.isMobile,scrollable:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-image-album")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-toolbar",{attrs:{dense:""}},[o("v-spacer"),o("v-toolbar-title",[t._v("Add pictures to albums")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v("mdi-close")])],1)],1),o("v-container",[o("v-list",[o("v-list-item-group",[o("v-list-item",[o("v-list-item-content",[o("v-dialog",{attrs:{width:"50%"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"primary"}},"v-btn",n,!1),a),[o("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Create New Album ")],1)]}}]),model:{value:t.newAlbum,callback:function(e){t.newAlbum=e},expression:"newAlbum"}},[o("new-album",{on:{close:function(e){t.newAlbum=!1},created:t.onAlbumCreated}})],1)],1)],1)],1),o("v-list-item-group",{attrs:{color:"accent",multiple:""},model:{value:t.selectedAlbums,callback:function(e){t.selectedAlbums=e},expression:"selectedAlbums"}},t._l(t.albums,(function(e,a){return o("v-list-item",{key:a,scopedSlots:t._u([{key:"default",fn:function(a){var n=a.active;return[o("v-list-item-action",[o("v-checkbox",{attrs:{"input-value":n}})],1),o("v-list-item-content",[o("v-list-item-title",[t._v(t._s(e.name))]),o("v-list-item-subtitle",[t._v(t._s(e.description))])],1)]}}],null,!0)})})),1)],1)],1),o("v-card-actions",[o("v-btn",{attrs:{width:"100%",color:"primary"},on:{click:t.onAlbumsSelected}},[t._v(" Select ")])],1)],1)],1)},Lt=[],Rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",[o("v-toolbar",{attrs:{dense:""}},[o("v-spacer"),o("v-toolbar-title",[t._v("Create New Album")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.$emit("close")}}},[o("v-icon",[t._v("mdi-close")])],1)],1),o("v-card-title",[t._v(t._s(t.albumName))]),o("v-container",[o("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.onCreate.apply(null,arguments)}}},[o("v-col",[o("v-text-field",{attrs:{label:"Album Name",rules:[function(t){return!!t||"Album name is required"}]},model:{value:t.albumName,callback:function(e){t.albumName=e},expression:"albumName"}}),o("v-text-field",{attrs:{label:"Location"},model:{value:t.albumLocation,callback:function(e){t.albumLocation=e},expression:"albumLocation"}}),o("v-text-field",{attrs:{label:"Album Description"},model:{value:t.albumDescrip,callback:function(e){t.albumDescrip=e},expression:"albumDescrip"}}),o("v-btn",{attrs:{width:"100%",color:"primary",type:"submit"}},[t._v(" Create ")])],1)],1)],1)],1)},Mt=[],zt=o("bc3a"),Et={name:"NewAlbum",data:function(){return{albumName:"New Album",albumLocation:"",albumDescrip:""}},methods:{onCreate:function(){var t=this;this.$refs.form.validate()&&zt.post("/darpan/Albums",{name:this.albumName,description:this.albumDescrip}).then((function(e){201==e.status&&(t.$toasted.success("Album Created"),t.$emit("created"))})).catch((function(e){console.log(e),t.$toasted.error("Error Occurred")}))}}},Ft=Et,qt=o("4bd4"),Nt=Object(d["a"])(Ft,Rt,Mt,!1,null,null,null),Yt=Nt.exports;h()(Nt,{VBtn:m["a"],VCard:vt["a"],VCardTitle:At["d"],VCol:N["a"],VContainer:Y["a"],VForm:qt["a"],VIcon:f["a"],VSpacer:S["a"],VTextField:rt["a"],VToolbar:_t["a"],VToolbarTitle:kt["a"]});var Ut=o("bc3a"),Gt=o.n(Ut),Ht=o("8df8"),Wt={name:"AddtoAlbum",data:function(){return{dialog:!1,newAlbum:!1,isMobile:Ht(),albums:[],selectedAlbums:[]}},props:{selectedPhotoGuids:{type:Array}},components:{NewAlbum:Yt},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Gt.a.get("/darpan/Albums").then((function(e){t.albums=e.data.value}))},onAlbumsSelected:function(){var t=this,e=[];if(0!=this.selectedPhotoGuids.length){var o,a=Object(L["a"])(this.selectedAlbums);try{for(a.s();!(o=a.n()).done;){var n=o.value;e.push(Gt.a.get("/darpan/Albums/".concat(this.albums[n].ID,"?$expand=files")))}}catch(i){a.e(i)}finally{a.f()}Promise.all(e).then((function(e){var o,a=[],n=Object(L["a"])(e);try{for(n.s();!(o=n.n()).done;){var s=o.value,r=s.data.files;r.push.apply(r,Object(O["a"])(t.selectedPhotoGuids.map((function(t){return{file_hash:t}})))),a.push(Gt.a.patch("/darpan/Albums/".concat(s.data.ID),{files:r}))}}catch(i){n.e(i)}finally{n.f()}if(0!==a.length)return Promise.all(a)})).then((function(e){t.$toasted.error("Successfully Added"),t.dialog=!1})).catch((function(e){console.log(e),t.$toasted.error("Error occured"),t.dialog=!1}))}},onAlbumCreated:function(){this.fetchData(),this.newAlbum=!1}}},Jt=Wt,Qt=(o("2e2d"),o("1800")),Kt=Object(d["a"])(Jt,Ot,Lt,!1,null,"1a120b4e",null),Xt=Kt.exports;h()(Kt,{VBtn:m["a"],VCard:vt["a"],VCardActions:At["a"],VCheckbox:q["a"],VContainer:Y["a"],VDialog:gt["a"],VIcon:f["a"],VList:p["a"],VListItem:b["a"],VListItemAction:Qt["a"],VListItemContent:g["a"],VListItemGroup:Pt["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VSpacer:S["a"],VToolbar:_t["a"],VToolbarTitle:kt["a"]});var Zt=function(){var t=this,e=this,o=e.$createElement,a=e._self._c||o;return a("v-overlay",[a("v-col",{style:{height:e.lightBoxHeight+"px",width:e.lightBoxWidth+"px",padding:0,margin:0,"overflow-y":"auto",background:"black"}},[a("v-app-bar",{staticStyle:{position:"absolute",left:"0px",top:"0px",background:"transparent","z-index":"2"},attrs:{dense:"",flat:""}},[a("v-spacer"),a("v-btn",{staticClass:"mr-1",attrs:{icon:"",fab:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-row",{staticClass:"row-main",attrs:{align:"stretch"}},[a("v-col",{directives:[{name:"touch",rawName:"v-touch",value:{right:function(){return t.$emit("swipeLeft")},left:function(){return t.$emit("swipeRight")}},expression:"{\n          right: () => this.$emit('swipeLeft'),\n          left: () => this.$emit('swipeRight'),\n        }"}],style:{padding:0,margin:0,position:"relative",height:e.lightBoxHeight+"px"},attrs:{cols:"12",sm:"12",md:"8",lg:"8",xl:"8"}},[a("div",{style:{position:"absolute",left:"0px",top:e.lightBoxHeight/2+"px","z-index":2}},[a("v-btn",{attrs:{icon:"",fab:"",large:""},on:{click:function(t){return e.$emit("swipeLeft")}}},[a("v-icon",[e._v("mdi-chevron-left")])],1)],1),e.photo.mimeType.startsWith("image")?a("v-img",{attrs:{src:"/thumb/"+e.photo.UIpaths_srcFHD,"lazy-src":"/thumb/"+e.photo.UIpaths_srcSD,contain:"",height:e.lightBoxHeight}}):e.photo.mimeType.startsWith("video")?a("video",{attrs:{height:"100%",width:"100%",autoplay:"",controls:""}},[a("source",{attrs:{src:"/original/"+e.photo.UIpaths_srcOriginal}}),a("source",{attrs:{src:"/thumb/"+e.photo.UIpaths_srcFHD,type:"video/mp4"}})]):e._e(),a("div",{style:{position:"absolute",right:"0px",top:e.lightBoxHeight/2+"px","z-index":2}},[a("v-btn",{attrs:{icon:"",fab:"",large:""},on:{click:function(t){return e.$emit("swipeRight")}}},[a("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),a("v-col",{style:{margin:0,height:e.lightBoxHeight+"px","overflow-y":"auto"},attrs:{cols:"12",sm:"12",md:"4",lg:"4",xl:"4"}},[a("v-form",{staticClass:"mt-4"},[a("v-col",[a("h3",{staticClass:"font-weight-light"},[e._v("Properties")]),a("v-text-field",{staticClass:"mt-4",attrs:{label:"Description"}}),a("v-row",{staticClass:"mt-4",attrs:{align:"center"}},[a("date-time-picker",{attrs:{dateTime:e.photo.takenDateTime,disabled:e.dateTimeDisabled},on:{input:function(t){return e.photo.takenDateTime=t}}}),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.dateTimeDisabled,expression:"dateTimeDisabled"}],attrs:{icon:"",small:""},on:{click:function(t){e.dateTimeDisabled=!1}}},[a("v-icon",[e._v("mdi-pencil-outline")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.dateTimeDisabled,expression:"!dateTimeDisabled"}],attrs:{icon:"",small:""},on:{click:function(t){e.dateTimeDisabled=!0}}},[a("v-icon",[e._v("mdi-pencil-off-outline")])],1),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.dateTimeDisabled,expression:"!dateTimeDisabled"}],attrs:{icon:"",small:""},on:{click:e.onDateTimeUpdate}},[a("v-icon",[e._v("mdi-check")])],1)],1),e.photo.address_city?a("v-card",{staticClass:"mt-4"},[a("v-img",{attrs:{src:"/map/"+e.photo.UIpaths_srcMap}}),a("v-card-text",[e._v(e._s(e.photo.address_label))])],1):e._e()],1)],1)],1)],1)],1)],1)},te=[],ee=o("bc3a"),oe={name:"Lightbox",data:function(){return{lightBoxWidth:0,lightBoxHeight:0,dateTimeDisabled:!0}},props:{photo:{type:Object}},watch:{photo:function(){this.dateTimeDisabled=!0}},components:{DateTimePicker:dt},created:function(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.lightBoxHeight=window.innerHeight,this.lightBoxWidth=window.innerWidth},onDateTimeUpdate:function(){var t=this;ee.patch("/darpan/Files/".concat(this.photo.hash),{takenDateTime:this.photo.takenDateTime}).then((function(e){200==e.status&&(t.$toasted.success("Date Time updated"),t.dateTimeDisabled=!0)})).catch((function(e){console.log(e),t.$toasted.error("Error occured")}))}}},ae=oe,ne=(o("63bc"),o("a797")),ie=o("269a"),se=o.n(ie),re=o("c3f0"),ce=Object(d["a"])(ae,Zt,te,!1,null,"9f3da286",null),le=ce.exports;h()(ce,{VAppBar:V["a"],VBtn:m["a"],VCard:vt["a"],VCardText:At["c"],VCol:N["a"],VForm:qt["a"],VIcon:f["a"],VImg:G["a"],VOverlay:ne["a"],VRow:H["a"],VSpacer:S["a"],VTextField:rt["a"]}),se()(ce,{Touch:re["a"]});var de=o("c1df"),ue=o.n(de),he={name:"Photos",data:function(){return{top:5,skip:0,sections:[],sectionBuffer:[],overlay:!1,lightBoxVisible:!1,lightBoxPhotoIndex:{sectionIndex:0,photoIndex:0},photosSelected:[]}},components:{photoSection:J,massDateEdit:wt,masslocationEdit:$t,Lightbox:le,addToAlbum:Xt},mounted:function(){var t=this;Gt.a.get("/darpan/Files?$apply=groupby((takenMonth),aggregate($count as count))&$orderby=takenMonth desc").then((function(e){var o,a=Object(L["a"])(e.data.value);try{for(a.s();!(o=a.n()).done;){var n=o.value;n.height=1.5*n.count*.3*.3*window.innerWidth,n.files=[],n.filesStillRequired=!0,n.visible=!1,t.sections.push(n)}}catch(i){a.e(i)}finally{a.f()}})).catch((function(e){401==e.response.status?t.$router.push("/"):t.$toasted.error(e.response.data)}))},methods:{fetchFiles:function(t,e,o){var a=Number(t[0].target.dataset.id);o?this.plugSection(a):this.unplugSection(a)},selectionChanged:function(){var t,e=[],o=Object(L["a"])(this.sections);try{for(o.s();!(t=o.n()).done;){var a=t.value,n=a.files.filter((function(t){return t.selected}));e.push.apply(e,Object(O["a"])(n.map((function(t){return t.hash}))))}}catch(i){o.e(i)}finally{o.f()}this.photosSelected=e},unplugSection:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.sections[t].visible=!1,e.sections[t].filesStillRequired=!1,o.abrupt("return");case 3:case"end":return o.stop()}}),o)})))()},plugSection:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function o(){var a,n,i,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return a=e.sections[t],a.filesStillRequired=!0,o.next=4,e.timeOut(500);case 4:if(a.filesStillRequired){o.next=6;break}return o.abrupt("return");case 6:if(!a.files||0==a.files.length){o.next=10;break}a.visible=!0,o.next=17;break;case 10:return n=ue()(a.takenMonth),i=n.isValid()?"year(takenDateTime) eq ".concat(n.year().toString()," and month(takenDateTime) eq ").concat(n.format("MM")):"takenDateTime eq null",o.next=14,Gt.a.get("/darpan/Files?$apply=filter(".concat(i," and deleted ne true)&$orderby=takenDateTime desc"));case 14:s=o.sent,a.files=s.data.value,a.visible=!0;case 17:return o.abrupt("return");case 18:case"end":return o.stop()}}),o)})))()},timeOut:function(t){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.setTimeout((function(){return e()}),t)})));case 1:case"end":return e.stop()}}),e)})))()},onDeleteTemporary:function(){var t,e=this,o=[],a=Object(L["a"])(this.photosSelected);try{for(a.s();!(t=a.n()).done;){var n=t.value;o.push(Gt.a.patch("/darpan/Files/".concat(n),{deleted:!0}))}}catch(i){a.e(i)}finally{a.f()}0!=o.length&&Promise.all(o).then((function(t){var o,a=[],n=Object(L["a"])(t);try{for(n.s();!(o=n.n()).done;){var s=o.value;a.push(s.data.hash)}}catch(i){n.e(i)}finally{n.f()}e.$toasted.success("".concat(a.length," photos deleted"))})).catch((function(t){console.log(t),e.$toasted.error("Error while deleting")}))},onReindex:function(){var t=this;0!=this.photosSelected.length&&(this.overlay=!0,Gt.a.post("/darpan/Reindex",{hashes:this.photosSelected}).then((function(e){t.overlay=!1,t.$toasted.success("Re-indexed")})).catch((function(e){t.overlay=!1,console.log(e),t.$toasted.error("Error occured")})))},onSwipeLeft:function(){0==this.lightBoxPhotoIndex.photoIndex?0!=this.lightBoxPhotoIndex.sectionIndex&&(this.lightBoxPhotoIndex.sectionIndex--,this.lightBoxPhotoIndex.photoIndex=this.sections[this.lightBoxPhotoIndex.sectionIndex].files.length-1):this.lightBoxPhotoIndex.photoIndex--},onSwipeRight:function(){this.lightBoxPhotoIndex.photoIndex==this.sections[this.lightBoxPhotoIndex.sectionIndex].files.length-1?this.lightBoxPhotoIndex.sectionIndex!=this.sections.length-1&&(this.lightBoxPhotoIndex.sectionIndex++,this.lightBoxPhotoIndex.photoIndex=0):this.lightBoxPhotoIndex.photoIndex++},parseDate:function(t){return ue()(t).format("MMMM, YYYY")}}},me=he,fe=(o("6555"),o("0789")),pe=o("8e36"),be=o("8dd9"),ve=o("3a2f"),ge=o("90a2"),xe=Object(d["a"])(me,P,B,!1,null,"784d9a02",null),ye=xe.exports;h()(xe,{VBtn:m["a"],VContainer:Y["a"],VExpandTransition:fe["a"],VIcon:f["a"],VOverlay:ne["a"],VProgressLinear:pe["a"],VRow:H["a"],VSheet:be["a"],VToolbar:_t["a"],VTooltip:ve["a"]}),se()(xe,{Intersect:ge["a"]});var _e=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[o("v-col",{attrs:{align:"center"}},[o("v-select",{attrs:{items:t.items},on:{click:t.onInputClick},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}}),o("v-btn",{attrs:{width:"100%",color:"primary"},on:{click:t.onImportClick}},[t._v("Import")])],1)],1)},ke=[],je=o("bc3a"),we={name:"Import",data:function(){return{items:[],selectedItem:""}},created:function(){var t=this;je.get("/darpan/GetImportFolders()").then((function(e){t.items=e.data.value}))},methods:{onImportClick:function(){je.post("/darpan/Import",{folder:this.selectedItem}).then((function(t){return console.log(t)}))},onInputClick:function(){var t=this;je.get("/darpan/GetImportFolders()").then((function(e){t.items=e.data.value}))}}},Ve=we,Ie=Object(d["a"])(Ve,_e,ke,!1,null,null,null),De=Ie.exports;h()(Ie,{VBtn:m["a"],VCol:N["a"],VContainer:Y["a"],VSelect:xt["a"]});var Se=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{"justify-center":""}},[o("v-card",{attrs:{width:t.isMobile?"100%":"50%",height:t.isMobile?"100%":"auto"}},[o("v-card-title",[o("h3",[t._v("Login")])]),o("v-card-text",[o("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.onLogin.apply(null,arguments)}}},[o("v-text-field",{attrs:{label:"Username","prepend-icon":"mdi-account-circle",rules:[function(t){return!!t||"Username is required"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),o("v-text-field",{attrs:{label:"Password",type:"password","prepend-icon":"mdi-lock",rules:[function(t){return!!t||"Password is required"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),o("v-row",{staticClass:"mt-2"},[o("v-btn",{attrs:{width:"100%",color:"indigo",type:"submit"}},[t._v("Login")])],1)],1)],1)],1)],1)},Ce=[],Te=o("bc3a"),Ae=o("8df8"),Pe={name:"Login",data:function(){return{isMobile:Ae(),username:"",password:""}},methods:{onLogin:function(){var t=this;this.$refs.form.validate()&&Te.get("/login",{auth:{username:this.username,password:this.password}}).then((function(e){t.$router.push("/Photos")})).catch((function(e){t.$toasted.error(e.response.data)}))}}},Be=Pe,$e=o("a722"),Oe=Object(d["a"])(Be,Se,Ce,!1,null,null,null),Le=Oe.exports;h()(Oe,{VBtn:m["a"],VCard:vt["a"],VCardText:At["c"],VCardTitle:At["d"],VForm:qt["a"],VLayout:$e["a"],VRow:H["a"],VTextField:rt["a"]});var Re=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[0!=t.selectedAlbums.length?o("v-toolbar",{staticStyle:{position:"fixed",right:"20px","z-index":"2","border-radius":"25px"},attrs:{dense:""}},[o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.onDelete}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-delete-outline")])],1)]}}],null,!1,3552490891)},[o("span",[t._v("Delete")])])],1):t._e(),o("v-row",t._l(t.albums,(function(e){return o("v-col",{key:e.ID,staticClass:"col",attrs:{lg:"3",xl:"3",md:"4",sm:"6",cols:"6"}},[o("v-card",[o("v-checkbox",{staticClass:"checkbox",attrs:{value:e.ID,light:""},model:{value:t.selectedAlbums,callback:function(e){t.selectedAlbums=e},expression:"selectedAlbums"}}),""!=e.albumSrc?o("v-img",{attrs:{height:"200px",src:"/thumb/"+e.albumSrc,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)"},on:{click:function(o){return t.$router.push("/Album/"+e.ID)}}}):o("v-sheet",{attrs:{height:"200px",color:"grey"},on:{click:function(o){return t.$router.push("/Album/"+e.ID)}}}),o("v-card-title",{staticClass:"text-truncate"},[t._v(t._s(e.name))]),""!=e.description?o("v-card-subtitle",{staticClass:"text-truncate"},[t._v(t._s(e.description))]):o("v-card-subtitle",{staticClass:"text-truncate"},[t._v("No description")])],1)],1)})),1),o("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({staticStyle:{"z-index":"5"},attrs:{absolute:"",bottom:"",right:"",fab:"",color:"primary"}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-plus")])],1)]}}]),model:{value:t.newAlbum,callback:function(e){t.newAlbum=e},expression:"newAlbum"}},[o("new-album",{on:{close:function(e){t.newAlbum=!1},created:t.onAlbumCreated}})],1)],1)},Me=[],ze={name:"Albums",data:function(){return{albums:[],newAlbum:!1,selectedAlbums:[]}},components:{NewAlbum:Yt},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Gt.a.get("/darpan/Albums").then((function(e){t.albums=e.data.value}))},onAlbumCreated:function(){this.fetchData(),this.newAlbum=!1},onDelete:function(){var t,e=this,o=[],a=Object(L["a"])(this.selectedAlbums);try{for(a.s();!(t=a.n()).done;){var n=t.value;o.push(Gt.a.delete("/darpan/Albums/".concat(n)))}}catch(i){a.e(i)}finally{a.f()}0!=o.length&&Promise.all(o).then((function(t){e.$toasted.success("Deleted"),e.selectedAlbums=[],e.fetchData()})).catch((function(t){console.log(t),e.$toasted,error("Error occured")}))}}},Ee=ze,Fe=(o("30c9"),Object(d["a"])(Ee,Re,Me,!1,null,"ddb4e7d2",null)),qe=Fe.exports;h()(Fe,{VBtn:m["a"],VCard:vt["a"],VCardSubtitle:At["b"],VCardTitle:At["d"],VCheckbox:q["a"],VCol:N["a"],VContainer:Y["a"],VDialog:gt["a"],VIcon:f["a"],VImg:G["a"],VRow:H["a"],VSheet:be["a"],VToolbar:_t["a"],VTooltip:ve["a"]});var Ne=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-col",[0!=t.photosSelected.length?o("v-toolbar",{staticStyle:{position:"fixed",right:"20px","z-index":"2","border-radius":"25px"},attrs:{dense:""}},[1==t.photosSelected.length?o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.onSetAlbumPhoto}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-star-outline")])],1)]}}],null,!1,3048042374)},[o("span",[t._v("Set Album Photo")])]):t._e(),o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.onReindex}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-reload")])],1)]}}],null,!1,3747237086)},[o("span",[t._v("Re-index")])]),o("masslocation-edit",{attrs:{selectedPhotoGuids:t.photosSelected}}),o("mass-date-edit",{attrs:{selectedPhotoGuids:t.photosSelected}})],1):t._e(),o("v-row",{staticClass:"ma-2 display-1",attrs:{justify:"center"}},[t._v(" "+t._s(t.albumDetails.name)+" ")]),o("v-row",{staticClass:"ma-2 subtitle-1",attrs:{justify:"center"}},[t._v(" "+t._s(t.albumDetails.description)+" ")]),t._l(t.albumPhotos,(function(e,a){return o("v-row",{key:a},[o("v-col",[o("v-row",{staticClass:"ma-2 display-1",attrs:{justify:"center"}},[o("v-icon",{attrs:{large:""}},[t._v("mdi-map-marker-outline")]),t._v(" "+t._s(e.city)+" ")],1),o("photo-section",{attrs:{files:e.files},on:{photoClicked:function(e){t.lightBoxPhotoIndex.sectionIndex=a,t.lightBoxPhotoIndex.photoIndex=e,t.lightBoxVisible=!0},selectionChanged:t.selectionChanged},scopedSlots:t._u([{key:"header",fn:function(){return[o("h3",{staticClass:"title"},[t._v(t._s(t.parseDate(e.takenDate)))])]},proxy:!0}],null,!0)})],1)],1)})),o("v-expand-transition",[t.lightBoxVisible?o("lightbox",{attrs:{photo:t.albumPhotos[t.lightBoxPhotoIndex.sectionIndex].files[t.lightBoxPhotoIndex.photoIndex]},on:{close:function(e){t.lightBoxVisible=!1},swipeLeft:t.onSwipeLeft,swipeRight:t.onSwipeRight}}):t._e()],1)],2)},Ye=[],Ue=(o("4e827"),{name:"Album",data:function(){return{albumID:this.$route.params.id,albumDetails:{},albumPhotos:[],lightBoxVisible:!1,lightBoxPhotoIndex:{sectionIndex:0,photoIndex:0},photosSelected:[]}},components:{photoSection:J,masslocationEdit:$t,massDateEdit:wt,Lightbox:le},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.$route.params.id&&(Gt.a.get("/darpan/Albums/".concat(this.albumID)).then((function(e){t.albumDetails=e.data})),Gt.a.get("/darpan/Albums/".concat(this.albumID,"/files?$expand=file")).then((function(e){var o=e.data.value.map((function(t){return t.file}));o.sort((function(t,e){return ue()(t.takenDateTime).unix()-ue()(e.takenDateTime).unix()}));var a=t.groupBy(o,"takenDate");for(var n in a){var i=t.groupBy(a[n],"address_city");for(var s in i){var r={};r.takenDate=n,r.city=s,r.files=i[s],t.albumPhotos.push(r)}}})))},groupBy:function(t,e){return t.reduce((function(t,o){return t[o[e]]=[].concat(Object(O["a"])(t[o[e]]||[]),[o]),t}),{})},selectionChanged:function(){var t,e=[],o=Object(L["a"])(this.albumPhotos);try{for(o.s();!(t=o.n()).done;){var a=t.value,n=a.files.filter((function(t){return t.selected}));e.push.apply(e,Object(O["a"])(n.map((function(t){return t.hash}))))}}catch(i){o.e(i)}finally{o.f()}this.photosSelected=e},onReindex:function(){var t=this;0!=this.photosSelected.length&&(this.overlay=!0,Gt.a.post("/darpan/Reindex",{hashes:this.photosSelected}).then((function(e){t.overlay=!1,t.$toasted.success("Re-indexed")})).catch((function(e){t.overlay=!1,console.log(e),t.$toasted.error("Error occured")})))},onSetAlbumPhoto:function(){var t=this;Gt.a.get("/darpan/Files/".concat(this.photosSelected[0])).then((function(e){return Gt.a.patch("/darpan/Albums/".concat(t.albumID),{albumSrc:e.data.UIpaths_srcSD})})).then((function(e){t.$toasted.success("Updated")})).catch((function(e){t.$toasted.error("Error occured"),t.console.log(e)}))},onSwipeLeft:function(){0==this.lightBoxPhotoIndex.photoIndex?0!=this.lightBoxPhotoIndex.sectionIndex&&(this.lightBoxPhotoIndex.sectionIndex--,this.lightBoxPhotoIndex.photoIndex=this.albumPhotos[this.lightBoxPhotoIndex.sectionIndex].files.length-1):this.lightBoxPhotoIndex.photoIndex--},onSwipeRight:function(){this.lightBoxPhotoIndex.photoIndex==this.albumPhotos[this.lightBoxPhotoIndex.sectionIndex].files.length-1?this.lightBoxPhotoIndex.sectionIndex!=this.albumPhotos.length-1&&(this.lightBoxPhotoIndex.sectionIndex++,this.lightBoxPhotoIndex.photoIndex=0):this.lightBoxPhotoIndex.photoIndex++},parseDate:function(t){return ue()(t).format("dddd, MMMM Do, YYYY")}}}),Ge=Ue,He=Object(d["a"])(Ge,Ne,Ye,!1,null,null,null),We=He.exports;h()(He,{VBtn:m["a"],VCol:N["a"],VExpandTransition:fe["a"],VIcon:f["a"],VRow:H["a"],VToolbar:_t["a"],VTooltip:ve["a"]});var Je=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{attrs:{fluid:""}},[0!=t.photoSelected.length?o("v-toolbar",{attrs:{dense:"",flat:""}},[o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"indigo",icon:""},on:{click:t.onDeleteTemporary}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-delete-outline")])],1)]}}],null,!1,1607628574)},[o("span",[t._v("Delete Permanently")])]),o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"indigo",icon:""},on:{click:t.onDeleteTemporary}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-delete-restore")])],1)]}}],null,!1,3446731478)},[o("span",[t._v("Restore")])]),o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[o("v-btn",t._g(t._b({attrs:{color:"indigo",icon:""},on:{click:t.onDeleteTemporary}},"v-btn",n,!1),a),[o("v-icon",[t._v("mdi-delete-sweep-outline")])],1)]}}],null,!1,2497697607)},[o("span",[t._v("Delete All")])])],1):t._e(),o("photo-section",{attrs:{files:t.photos},on:{selectionChange:function(e){return t.photoSelected=e}},scopedSlots:t._u([{key:"header",fn:function(){return[o("h3",{staticClass:"title"},[t._v(" "+t._s("Deleted Photos ("+t.photos.length+")")+" ")])]},proxy:!0}])})],1)},Qe=[],Ke=o("bc3a"),Xe={name:"Bin",data:function(){return{photos:[],photoSelected:[]}},created:function(){this.fetchData()},components:{photoSection:J},methods:{fetchData:function(){var t=this;Ke.get("/darpan/Files?$apply=filter(deleted eq true)&$orderby=takenDate desc").then((function(e){t.photos=e.data.value})).catch((function(e){401==e.response.status?t.$router.push("/"):t.$toasted.error(e.response.data)}))}}},Ze=Xe,to=(o("29b7"),Object(d["a"])(Ze,Je,Qe,!1,null,"29eafde9",null)),eo=to.exports;h()(to,{VBtn:m["a"],VContainer:Y["a"],VIcon:f["a"],VToolbar:_t["a"],VTooltip:ve["a"]}),a["a"].use(A["a"]);var oo=[{path:"/",name:"Login",component:Le},{path:"/Photos",name:"Photos",component:ye},{path:"/Albums",name:"Albums",component:qe},{path:"/Album/:id",name:"Album",component:We},{path:"/Import",name:"Import",component:De},{path:"/Bin",name:"Bin",component:eo}],ao=new A["a"]({routes:oo}),no=ao,io=o("f309");a["a"].use(io["a"]);var so=new io["a"]({theme:{themes:{light:{primary:"#96B9D0"}}}}),ro=o("a65d"),co=o.n(ro);a["a"].config.productionTip=!1,a["a"].use(co.a,{duration:4e3,position:"bottom-right"}),new a["a"]({router:no,vuetify:so,render:function(t){return t(T)}}).$mount("#app")},"63bc":function(t,e,o){"use strict";o("e351")},6555:function(t,e,o){"use strict";o("a41c")},"67c4":function(t,e,o){},"921e":function(t,e,o){"use strict";o("9a2b")},"9a2b":function(t,e,o){},a41c:function(t,e,o){},a6dc:function(t,e,o){},ac45:function(t,e,o){},c86f:function(t,e,o){"use strict";o("a6dc")},e351:function(t,e,o){}});
//# sourceMappingURL=app.322f3497.js.map